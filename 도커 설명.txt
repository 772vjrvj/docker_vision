Docker ì‚¬ìš© ê°€ì´ë“œ (í¬ë¡¤ë§ í”„ë¡œì íŠ¸ ì¤‘ì‹¬)


ğŸ³ Docker ì„¤ì¹˜ ë° í…ŒìŠ¤íŠ¸


ì„¤ì¹˜
ê³µì‹ í™ˆí˜ì´ì§€: https://www.docker.com/products/docker-desktop


ë²„ì „ í™•ì¸
docker --version
# ì˜ˆì‹œ: Docker version 28.0.4, build b8034c0


í…ŒìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆ ì‹¤í–‰
docker run hello-world
ì •ìƒ ì¶œë ¥ë˜ë©´ Dockerê°€ ì˜ ì‘ë™í•˜ëŠ” ìƒíƒœì…ë‹ˆë‹¤.


Ubuntu ì»¨í…Œì´ë„ˆ ì ‘ì† í…ŒìŠ¤íŠ¸
docker run -it ubuntu bash
-it: ì…ë ¥ ê°€ëŠ¥í•˜ê²Œ í•¨


bash: ì…¸ ì‹¤í–‰
exit ì…ë ¥ ì‹œ ì»¨í…Œì´ë„ˆ ì¢…ë£Œ


ğŸ“ ì‘ì—… ë””ë ‰í† ë¦¬ êµ¬ì„±

C:\Users\<ì‚¬ìš©ìëª…>\Desktop\crawler-docker

í•„ìš”í•œ íŒŒì¼

main.py: í¬ë¡¤ë§ ì½”ë“œ

requirements.txt: Python ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª©ë¡

Dockerfile: ì´ë¯¸ì§€ ë¹Œë“œ ì •ì˜ íŒŒì¼

ğŸ“„ requirements.txt ì˜ˆì‹œ

selenium
webdriver-manager
schedule
requests
psutil

ğŸ³ Dockerfile ì˜ˆì‹œ

# 1. Python ë² ì´ìŠ¤ ì´ë¯¸ì§€
FROM python:3.10-slim

# 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
ENV PYTHONDONTWRITEBYTECODE=1
ENV PYTHONUNBUFFERED=1

# 3. íŒ¨í‚¤ì§€ ì„¤ì¹˜ (Chrome í¬í•¨)
RUN apt-get update && apt-get install -y \
    chromium \
    chromium-driver \
    fonts-liberation \
    libnss3 \
    libatk1.0-0 \
    libatk-bridge2.0-0 \
    libxss1 \
    libxcomposite1 \
    libxrandr2 \
    libasound2 \
    libpangocairo-1.0-0 \
    libgtk-3-0 \
    libgbm-dev \
    wget \
    curl \
    unzip \
    gnupg \
    ca-certificates \
 && apt-get clean && rm -rf /var/lib/apt/lists/*

# 4. ì‘ì—… ë””ë ‰í† ë¦¬
WORKDIR /app

# 5. ì†ŒìŠ¤ ë³µì‚¬
COPY requirements.txt .
COPY main.py .

# 6. Python ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
RUN pip install --no-cache-dir -r requirements.txt

# 7. Chrome í™˜ê²½ ì„¤ì •
ENV CHROME_BIN=/usr/bin/chromium
ENV CHROMEDRIVER_PATH=/usr/bin/chromedriver
ENV PATH="${CHROME_BIN}:${PATH}"

# 8. ì‹¤í–‰ ëª…ë ¹
CMD ["python", "main.py"]

ğŸ”§ ì´ë¯¸ì§€ ë¹Œë“œ ë° í™•ì¸

cd D:\GIT\docker\vision




ìì£¼ ë³€ê²½ë˜ëŠ” íŒŒì¼ì€ ì•„ë˜ë¡œ ë°°ì¹˜
requirements.txtëŠ” ë‹¨ë…ìœ¼ë¡œ ë³µì‚¬

ìºì‹œ ê°•ì œ ë¬´ì‹œëŠ” --no-cache, ìµœì‹  pullì€ --pull

docker build -t vision-crawler .
# ì¼ë°˜ì ìœ¼ë¡œ ìºì‹œ ì‚¬ìš©, ë¹ ë¥´ê³  íš¨ìœ¨ì 

docker build --no-cache -t vision-crawler .
# ë¬¸ì œ ìƒê¸¸ ë•Œ ê°•ì œë¡œ ì¬ë¹Œë“œ
í•„ìš” ì‹œ .dockerignoreë„ ê°™ì´ ì“°ë©´ ìºì‹œì— ë”ìš± ìµœì í™”ë©ë‹ˆë‹¤.



ë¹Œë“œ ì„±ê³µ ë©”ì‹œì§€ ì˜ˆì‹œ
Successfully tagged vision-crawler:latest

CACHED: ì´ì „ ê²°ê³¼ ì¬ì‚¬ìš©
FINISHED: ë¹Œë“œ ì™„ë£Œ


docker images         # ì´ë¯¸ì§€ ëª©ë¡ í™•ì¸
docker ps             # ì‹¤í–‰ ì¤‘ ì»¨í…Œì´ë„ˆ
docker ps -a          # ì‹¤í–‰ ì¢…ë£Œ í¬í•¨ ì „ì²´


ğŸš€ ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ë°©ì‹

1íšŒì„± ì‹¤í–‰
docker run --rm --name vision-crawler-container vision-crawler
--rm: ì¢…ë£Œ ì‹œ ì»¨í…Œì´ë„ˆ ì‚­ì œ

ì§€ì† ì‹¤í–‰
docker run --name vision-crawler-container vision-crawler

ë¡œê·¸ í™•ì¸ / ì¬ì‹¤í–‰
docker logs vision-crawler-container
docker start -a vision-crawler-container

ì»¨í…Œì´ë„ˆ ì‚­ì œ

docker rm vision-crawler-container
# ì‹¤í–‰ ì¤‘ì¸ ê²½ìš° ê°•ì œ ì‚­ì œ

docker rm -f vision-crawler-container

âš™ï¸ ì„±ëŠ¥ í–¥ìƒ ì˜µì…˜

docker run --name vision-crawler-container \
  --shm-size=1g --memory=2g --cpus=2.0 \
  vision-crawler

docker run --name vision-crawler-container --shm-size=1g --memory=2g --cpus=2.0 vision-crawler

ì˜µì…˜
ì„¤ëª…
--shm-size=1g
ê³µìœ  ë©”ëª¨ë¦¬ ì˜ì—­ ì¦ê°€ (Chrome ì•ˆì •ì„± í–¥ìƒ)
--memory=2g
ë©”ëª¨ë¦¬ ì œí•œ
--cpus=2.0
CPU ì‚¬ìš©ëŸ‰ ì œí•œ

ğŸ§¹ ë¶ˆí•„ìš” ì´ë¯¸ì§€ ì •ë¦¬
docker image prune
ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì´ë¯¸ì§€ ì •ë¦¬


ğŸ› ï¸ ìœ ìš©í•œ íŒ

ê¸°ì¡´ ì»¨í…Œì´ë„ˆ ê°•ì œ ì‚­ì œ í›„ ì‹¤í–‰

docker rm -f vision-crawler-container 2>nul
docker run --name vision-crawler-container vision-crawler

ìë™ ì‹¤í–‰ ë°°ì¹˜ íŒŒì¼ (Windows)

run-crawler.bat

@echo off
cd /d D:\GIT\docker\vision
docker rm -f vision-crawler-container >nul 2>&1
docker run --name vision-crawler-container vision-crawler
pause





--------------------------------






ë„ì»¤ ë‹¤ìš´ë¡œë“œ
https://www.docker.com/products/docker-desktop



ë„ì»¤ ë²„ì „ í™•ì¸
C:\Users\772vj>docker --version
Docker version 28.0.4, build b8034c0


ì²« ë²ˆì§¸ ì»¨í…Œì´ë„ˆ ì‹¤í–‰í•´ë³´ê¸°
docker run hello-world
ì´ê±´ Dockerì˜ "ì•ˆë…•í•˜ì„¸ìš”!" í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤. ì˜ ë‚˜ì˜¤ë©´ Dockerê°€ ì œëŒ€ë¡œ ì‘ë™í•œë‹¤ëŠ” ëœ»ì´ì—ìš”.


docker run -it ubuntu bash
ubuntuë¼ëŠ” ë¦¬ëˆ…ìŠ¤ ìš´ì˜ì²´ì œ ì•ˆì— ë“¤ì–´ê°€ëŠ” ê±°ì˜ˆìš”.
-itì€ í‚¤ë³´ë“œë¡œ ëª…ë ¹ ì…ë ¥ ê°€ëŠ¥í•˜ê²Œ í•´ì£¼ëŠ” ì˜µì…˜
bashëŠ” ë¦¬ëˆ…ìŠ¤ í„°ë¯¸ë„ì„ ì—¬ëŠ” ëª…ë ¹ì–´ì˜ˆìš”
ğŸ“¦ ìš°ë¦¬ëŠ” ì´ê±¸ "ì»¨í…Œì´ë„ˆ"ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.


root@724ebbc025a6:/#
ì—¬ê¸°ëŠ” ì´ì œ ë¦¬ëˆ…ìŠ¤ ì»¨í…Œì´ë„ˆ ì•ˆì´ì—ìš”.
ë‹¹ì‹ ì€ ì§€ê¸ˆ "ê°€ìƒì˜ ë¦¬ëˆ…ìŠ¤ ì»´í“¨í„° ì•ˆ"ì— ë“¤ì–´ì˜¨ ê±°ì˜ˆìš”.


ì»¨í…Œì´ë„ˆ ë°–ìœ¼ë¡œ ë‚˜ê°€ê³  ì‹¶ìœ¼ë©´, ì´ë ‡ê²Œ ì…ë ¥í•˜ì„¸ìš”:
exit


ë¨¼ì € ì‘ì—…í•  í´ë”ë¥¼ í•˜ë‚˜ ë§Œë“¤ì–´ìš”. ì˜ˆë¥¼ ë“¤ì–´:
C:\Users\772vj\Desktop\crawler-docker


íŒŒì¼ 				ì´ë¦„	ì„¤ëª…
main.py				ë‹¹ì‹ ì˜ í¬ë¡¤ëŸ¬ ì½”ë“œ (í˜„ì¬ ìˆëŠ” ì „ì²´ ì½”ë“œ)
requirements.txt	í•„ìš”í•œ íŒŒì´ì¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª©ë¡
Dockerfile			Dockerì—ì„œ ì´ë¯¸ì§€ë¥¼ ì–´ë–»ê²Œ ë§Œë“¤ì§€ ì•Œë ¤ì£¼ëŠ” ì„¤ëª…ì„œ


requirements.txt
selenium
webdriver-manager
schedule
requests
psutil


Dockerfile ë§Œë“¤ê¸°
DockerfileíŒŒì¼ ì°¸ì¡°


3ê°œ íŒŒì¼ì´ ìˆëŠ” ê²½ë¡œì—ì„œ
cd D:\GIT\docker\vision
docker build -t vision-crawler .



ì˜ ë˜ë©´ ë‚˜ì˜¤ëŠ” ë§ˆì§€ë§‰ ë©”ì‹œì§€
Successfully built abc123456789
Successfully tagged vision-crawler:latest

ë¡œê·¸ ë‚´ìš©	ì„¤ëª…
FINISHED	ë¹Œë“œ ì„±ê³µ! âœ…
CACHED	ì´ì „ ì„¤ì¹˜ ê²°ê³¼ ì¬ì‚¬ìš©í•´ì„œ ë¹¨ë¼ì§ ğŸ‘
RUN pip install	requirements ì„¤ì¹˜ ì™„ë£Œ
naming to docker.io/library/vision-crawler:latest	ì´ë¯¸ì§€ ì´ë¦„ ì˜ ì„¤ì •ë¨ (vision-crawler)
2 warnings	ê±±ì •í•˜ì§€ ë§ˆì„¸ìš”. ENV ë¬¸ë²• ê²½ê³ ì¼ ë¿ì´ê³  ë™ì‘ì—ëŠ” ë¬¸ì œ ì—†ìŠµë‹ˆë‹¤ âœ…


ì‹¤í–‰ì¤‘ì´ë„ì»¤
docker images
REPOSITORY       TAG       IMAGE ID       CREATED         SIZE
vision-crawler   latest    ee4a21c7e7fe   2 minutes ago   1.53GB
ubuntu           latest    72297848456d   2 months ago    117MB
hello-world      latest    7e1a4e2d11e2   2 months ago    20.4kB


í•­ëª©	ë³´ì„ ì—¬ë¶€	ì„¤ëª…
Dockerfile, main.py, requirements.txt	âœ… ë””ë ‰í† ë¦¬ì— ìˆìŒ	ì‚¬ìš©ìê°€ ì§ì ‘ ë§Œë“  ê²ƒ
vision-crawler ì´ë¯¸ì§€	âŒ ë””ë ‰í† ë¦¬ì— ì—†ìŒ	docker images ë¡œ í™•ì¸ ê°€ëŠ¥
ì‹¤í–‰ëœ ì»¨í…Œì´ë„ˆ	âŒ ë””ë ‰í† ë¦¬ì— ì—†ìŒ	docker ps ë˜ëŠ” docker ps -aë¡œ í™•ì¸ ê°€ëŠ¥



docker run --rm --name crawler1 vision-crawler
--rm: ì‹¤í–‰ ëë‚˜ë©´ ì»¨í…Œì´ë„ˆ ìë™ ì‚­ì œ
--name crawler1: ì»¨í…Œì´ë„ˆ ì´ë¦„ ì§€ì •
vision-crawler: ë°©ê¸ˆ ë§Œë“  ì´ë¯¸ì§€ ì´ë¦„



--rm	ì‹¤í–‰ í›„ ìë™ ì‚­ì œ	í…ŒìŠ¤íŠ¸ë‚˜ 1íšŒì„± ì‹¤í–‰
(ì—†ìŒ)	ì¢…ë£Œ í›„ì—ë„ ì»¨í…Œì´ë„ˆ ë³´ì¡´	ì„œë¹„ìŠ¤ìš©, ë¡œê·¸í™•ì¸, ìœ ì§€ìš©



docker run --rm --name vision-craler-container vision-crawler



ğŸ§¹ ì˜¤ë˜ëœ ì´ë¯¸ì§€ ì‚­ì œ ëª…ë ¹ì–´ (ì„ íƒ)
docker image prune
ğŸ”¸ "íƒœê·¸ ì—†ëŠ” ì˜ˆì „ ì´ë¯¸ì§€"ë§Œ ì‹¹! ì •ë¦¬í•´ì¤˜ìš”
ğŸ”¸ í˜„ì¬ ì‚¬ìš©í•˜ëŠ” ì´ë¯¸ì§€ëŠ” ê±´ë“œë¦¬ì§€ ì•Šì•„ìš”

docker run --rm --name vision-crawler-container vision-crawler

docker ps -a

âœ… íŠ¹ì • ì´ë¦„ì˜ ì»¨í…Œì´ë„ˆ ì‚­ì œ
docker rm vision-crawler-container


ë§Œì•½ ì‹¤í–‰ ì¤‘ì´ë©´ -f ì˜µì…˜ì„ ë¶™ì—¬ ê°•ì œ ì¢…ë£Œ+ì‚­ì œ:
docker rm -f vision-crawler-container


ì´ë ‡ê²Œ í•˜ë©´ ë§¤ë²ˆ ì‹¤í–‰ ì „ì— ê¸°ì¡´ ì»¨í…Œì´ë„ˆë¥¼ ì‚­ì œí•˜ê³  ìƒˆë¡œ ë„ìš°ëŠ” í˜•íƒœë¡œ ê¹”ë”í•˜ê²Œ ìœ ì§€í•  ìˆ˜ ìˆì–´ìš”.
docker rm -f vision-crawler-container
docker run --name vision-crawler-container vision-crawler


âŒ ê·¸ëŸ°ë° ì‚­ì œë˜ë©´ ë¶ˆí¸í•  ë•ŒëŠ”?
ì»¨í…Œì´ë„ˆë¥¼ ìœ ì§€í•˜ë ¤ë©´ --rm ë¹¼ê³  ì‹¤í–‰í•˜ì„¸ìš”:
docker run --name vision-crawler-container vision-crawler
ì‹¤í–‰ í›„ ì»¨í…Œì´ë„ˆëŠ” ë©ˆì¶˜ ìƒíƒœë¡œ ë‚¨ì•„ìˆê³ , ë‚˜ì¤‘ì— ë¡œê·¸ë¥¼ í™•ì¸í•˜ê±°ë‚˜ ë‹¤ì‹œ ì‹œì‘í•  ìˆ˜ë„ ìˆì–´ìš”:


docker start -a vision-crawler-container
docker logs vision-crawler-container




ì˜µì…˜	ì„¤ëª…
--shm-size=2g	ê³µìœ  ë©”ëª¨ë¦¬ ì˜ì—­ì„ 2GBë¡œ ì„¤ì • (í¬ë¡¬ ì•ˆì •í™”ì— í•„ìˆ˜)
--memory=2g	ë©”ëª¨ë¦¬ ì œí•œ ì„¤ì • (ì˜ˆ: 2GB)
--cpus=2.0	CPU ì‚¬ìš© ì œí•œ (2ê°œ ë…¼ë¦¬ì½”ì–´ê¹Œì§€ ì‚¬ìš© í—ˆìš©)

ì»¨í…Œì´ë„ˆ ë¡œê·¸ê°€ ë‚¨ë„ë¡ --rm ì œê±°ë„ ê°€ëŠ¥
docker run --rm --name vision-crawler-container --shm-size=3.5g --memory=3.5g --cpus=3.0 vision-crawler


docker stop vision-crawler-container
docker rm vision-crawler-container





